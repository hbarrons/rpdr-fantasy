<%- include('../partials/html-head') %>
<link 
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
  rel="stylesheet" 
  integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
  crossorigin="anonymous"
>
<link rel="stylesheet" href="/stylesheets/profiles/index.css"/>
<link rel="shortcut icon" href="./images/rpdr-fantasy/RuPaul.png">
<%- include('../partials/nav') %>

<main class="bg-light">
  <section class="profile-card">
    <div class="container py-5 px-3">

        <% profiles.forEach(profile => { %>
            <a class="text-decoration-none" href="/profiles/<%= profile._id %>">
              <div class="card mb-4 shadow-sm">
                <% if (profile.avatar) { %>
                  <img
                    class="img-top"
                    src="<%= profile.avatar %>"
                    alt="<%= profile.name %>'s avatar"
                    width="100%"
                  />
                <% } else {%>
                  <img
                    class="img-top"
                    src="https://picsum.photos/200"
                    alt="A placeholder avatar"
                    width="100%"
                  />
                <% } %>
                <div class="card-body">
                  <p class="card-title fs-3 text-dark"><%= profile.name %></p>
                </a>
                <div class="guess"> 
                  <% if (profile.guessEpisode.length === 0) { %>
                    <div class="week-guess">This Weeks Guess</div>
                    <div>No Guesses Yet</div>
                  <% } else { %>
                  <div class="week-guess">This Weeks Guess</div>
                   <div >Episode: <%= profile.guessEpisode[(profile.guessEpisode.length) - 1].episode %>
                  <br>
                  Queen: <%= profile.guessEpisode[(profile.guessEpisode.length) - 1].name %>
                  <% } %> 
                </div>
                <div> 
                  <% if (profile.guessEpisode.length === 0) { %>
                    <div class="week-guess">Season Winner Guess</div>
                   <div>No Guesses Yet</div>
                  <% } else { %>
                  <div class="week-guess">Season Winner Guess</div>
                   <div>Queen: <%= profile.guessSeason %>
                  <% } %> 
                </div>
                </div>
                </div>
              </div>
          </div>
        <% }) %>
  </section>
</main>

<script 
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" 
  crossorigin="anonymous"
></script>

<%- include('../partials/footer') %>